(function(b,c){b.ObjectRegistry=b.ObjectRegistry||{};b.ObjectRegistry.Slideshow=b.ObjectRegistry.Slideshow||{};b.ObjectRegistry.Slideshow.Register=function(a,c){b.ObjectRegistry.Slideshow.hasOwnProperty(a)&&g("WARNING \x3e Slideshow object is already registered. Rebinding new slideshow "+a+". Old one will fade into darkness.");return b.ObjectRegistry.Slideshow[a]=c};b.Slideshow=function(){this.slideCount=0;this.transitionType;this.slider=null;this.slideViewTime=this.transitionTime=1E3;this.currentSlideIndex=
0;this.uniqueID=this.autoTransition=null;this.liveEditEnabled=!1;return this};b.Slideshow.prototype.DIAGNOSTIC_MODE=!1;var g=function(a){b.Slideshow.prototype.DIAGNOSTIC_MODE&&console.log("Slideshow diagnostic[SlideshowGenerator.js] "+a)};b.Slideshow.prototype.initSlides=function(a){c("img[data-delay-load]",a).each(function(){var a=c(this),b=attrOrProps(a,"data-delay-load");attrOrProps(a,"src",b)})};b.Slideshow.prototype.initSlidePlusAndMinusOneIndex=function(a,b,f){if(0<c("img[data-delay-load]",
b).length){b=c("img[data-delayed-image]",b);var d=b.length,g=function(a,b){var d=c(a),h=attrOrProps(d,"dataset"),h=void 0==h?d.attr("data-delay-load"):h.delayLoad,f=attrOrProps(d,"src");"undefined"!==typeof b&&0!==b?d.css("height",b+"px"):d.css("height","auto");h!==f&&(void 0!==h&&""!==h&&null!==h)&&(attrOrProps(d,"src",h),d.removeAttr("data-delay-load"))};g(b[a],f);a+1>=d?g(b[0],f):g(b[a+1],f);0>a-1?g(b[d-1],f):g(b[a-1],f)}else a=c("img",b),0!==f?a.css("height",f+"px"):a.css("height","auto")};b.Slideshow.prototype.generate=
function(a,h,f,d,m,k){g("Generating Slideshow for "+a);b.ObjectRegistry.Slideshow.Register(a,this);var e=this.mapUi(a);this.slider=this.createSlider(e);this.slider.$slider.removeClass("slide");this.initSlidePlusAndMinusOneIndex(0,e.$slider,k);null===h?(this.transitionTime=1E3*e.values.transitionTiming,this.slideViewTime=1E3*e.values.slideTiming):(this.transitionTime=1E3*h,this.slideViewTime=1E3*f);this.transitionType=e.transitionType;this.slideCount=e.$slides.length;this.currentSlideIndex=this.transitionType===
this.TransitionType.Slide?1:0;this.uniqueID=a;this.liveEditEnabled=d;a=100/this.slideCount;1<this.slideCount&&(e.$slides.first().addClass("showing"),e.$slides.first().removeAttr("aria-hidden"));if(this.transitionType===this.TransitionType.Slide)this.slider.createOverlapImagesForFirstAndLastSlides(),this.slideCount=e.$slides.length,a=100/this.slideCount,e.$slides.removeClass("hidden"),e.$slider.css("left","-100%");else if(this.transitionType===this.TransitionType.Fade)for(e.$slides.slice(1).animate({opacity:0},
0),e.$slides.removeClass("hidden"),h=0;h<this.slideCount;h++){f=a*h;if(/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)||-1<navigator.userAgent.indexOf("Edge"))f=(Math.floor(100*a)/100).toFixed(2)*h;c(e.$slides[h]).css("left","-"+f+"%")}e.$slider.css("width",this.slideCount+"00%");e.$slides.css("width",a+"%");e.$pages.first().addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e");this.autoTransition=function(){var a=
this;this.isDisposed()||e.$slider.animate({delay:1},this.slideViewTime,function(){g("Begin Slide Transition Cycle ( Slide View Time: "+a.slideViewTime+" ms, Transition Time: "+a.transitionTime+" ms  )");a.next(a.autoTransition)})};m||this.autoTransition();this.bindUx()};b.Slideshow.prototype.isDisposed=function(){return this!==b.ObjectRegistry.Slideshow[this.uniqueID]};b.Slideshow.prototype.pause=function(){this.slider.$slider.stop(!0);this.slider.$slides.stop(!0);this.autoTransition=null};b.Slideshow.prototype.paused=
!1;b.Slideshow.prototype.pausedSlideIndex=0;b.Slideshow.prototype.onPause=function(){this.paused||(this.paused=!0,this.pausedSlideIndex=this.currentSlideIndex,this.pause())};b.Slideshow.prototype.onResume=function(){if(this.paused){this.paused=!1;var a=this;this.autoTransition=function(){a.isDisposed()||a.slider.$slider.animate({delay:1},a.slideViewTime,function(){g("Begin Slide Transition Cycle ( Slide View Time: "+a.slideViewTime+" ms, Transition Time: "+a.transitionTime+" ms  )");a.next(a.autoTransition)})};
this.transitionToSlide(this.pausedSlideIndex,null,function(){a.autoTransition()})}};b.Slideshow.prototype.transitionToSlide=function(a,b,f){g("Transition to "+a);var d=this,m=function(){if(!d.isDisposed()){g("Fade Animation Complete for slide "+d.currentSlideIndex+" to "+a+" - Update Indexes and Classes. Invoke Next Transition");d.slider.$slider.find(".showing").removeClass("showing").attr("aria-hidden","true");d.slider.$pager.find(".active").removeClass("active").find(".currentDot").remove();c(d.slider.$pages[a]).addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e");
c(d.slider.$slides[a]).addClass("showing").removeAttr("aria-hidden");d.currentSlideIndex=a;for(var b=0,b=0;b<d.slider.$slides.length;b++)b!=a&&c(d.slider.$slides[b]).stop(!0).animate({opacity:0},0);"function"===typeof f&&f.call(d)}},k=function(){if(!d.isDisposed()){var b=c(d.slider.$slides[a]);g("Dot Update Invoked for "+a+" corresponding to id "+attrOrProps(b,"id")+".");c("#dot"+attrOrProps(b,"id")).parent("ol").children("li").removeClass("active").find(".currentDot").remove();c("#dot"+attrOrProps(b,
"id")).addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e")}};if(this.transitionType===this.TransitionType.Slide){a>this.slideCount-2?a=1:1>a&&(a=this.slideCount-2);g("(Slide) Current Slide: "+this.currentSlideIndex+"; Target Slide: "+a);b=this.GetSlideDirectionTransitionType(a,b);k();var e=0,l=0;switch(b){case this.SlideTransitionDirectionType.FirstToLast:e=0;g("First Slide to Last Slide Transition");this.slider.$slider.animate({left:"0%"},
this.transitionTime,function(){var a=d.slider.$slides.length-2;/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(e=100/d.slider.$slides.length%d.slider.$slides[a].style.width.replace("%","")*a*a);l=100*a-e;d.slider.$slider.css("left","-"+l+"%");d.slider.$slider.find(".showing").removeClass("showing").attr("aria-hidden","true");d.slider.$pager.find(".active").removeClass("active");d.slider.$pager.find(".currentDot").remove();c(d.slider.$pages[a]).addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e");
c(d.slider.$slides[a]).addClass("showing").removeAttr("aria-hidden");d.currentSlideIndex=a;"function"===typeof f&&f.call(d)});break;case this.SlideTransitionDirectionType.LastToFirst:e=0;/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(e=100/d.slider.$slides.length%d.slider.$slides[d.currentSlideIndex].style.width.replace("%","")*a*a);l=100*(d.currentSlideIndex+1)-e;this.slider.$slider.animate({left:"-"+l+"%"},this.transitionTime,function(){g("Last Slide to First Slide Transition");
d.slider.$slider.css("left","-100%");d.slider.$slider.find(".showing").removeClass("showing").attr("aria-hidden","true");d.slider.$pager.find(".active").removeClass("active");d.slider.$pager.find(".currentDot").remove();c(d.slider.$pages[1]).addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e");c(d.slider.$slides[1]).addClass("showing").removeAttr("aria-hidden");d.currentSlideIndex=1;"function"===typeof f&&f.call(d)});break;default:e=
0,/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(e=100/d.slider.$slides.length%d.slider.$slides[d.currentSlideIndex].style.width.replace("%","")*a*a),l=100*a-e,this.slider.$slider.animate({left:"-"+l+"%"},this.transitionTime,function(){g("Inner Slide Transition");d.slider.$slider.find(".showing").removeClass("showing").attr("aria-hidden","true");d.slider.$pager.find(".active").removeClass("active");d.slider.$pager.find(".currentDot").remove();c(d.slider.$pages[d.currentSlideIndex]).addClass("active").children("a").append("\x3cspan class\x3d'visuallyhidden currentDot'\x3e(Current Item)\x3c/span\x3e");
c(d.slider.$slides[d.currentSlideIndex]).addClass("showing").removeAttr("aria-hidden");d.currentSlideIndex=a;"function"===typeof f&&f.call(d)})}}else this.transitionType===this.TransitionType.Fade&&(g("(Fade) Current Slide: "+this.currentSlideIndex+"; Target Slide: "+a),a>this.slideCount-1?a=0:0>a&&(a=this.slideCount-1),c(this.slider.$slides).css("zindex",1),c(this.slider.$slides).animate({opacity:0},this.transitionTime,k),c(this.slider.$slides[a]).stop(!0).css("zindex",2).animate({opacity:1},this.transitionTime,
m));d.initSlidePlusAndMinusOneIndex(a,d.slider.$slider)};b.Slideshow.prototype.next=function(a){this.transitionToSlide(this.currentSlideIndex+1,this.DirectionType.Forward,a)};b.Slideshow.prototype.previous=function(a){this.transitionToSlide(this.currentSlideIndex-1,this.DirectionType.Backward,a)};b.Slideshow.prototype.dotClick=function(a){a=this.mapDotClickUi(a);this.transitionToSlide(a.selectedSlideIndex,this.DirectionType.Omni);this.pausedSlideIndex=a.selectedSlideIndex;c(".liveRegionJS"+this.uniqueID).text("Item "+
(a.selectedSlideIndex+1)+" of "+this.slider.$slides.length)};b.Slideshow.prototype.TransitionType={Fade:0,Slide:1};b.Slideshow.prototype.DirectionType={Forward:0,Backward:1,Omni:2};b.Slideshow.prototype.SlideTransitionDirectionType={Inside:0,FirstToLast:1,LastToFirst:2};b.Slideshow.prototype.GetSlideDirectionTransitionType=function(a,b){return 1>=this.currentSlideIndex&&a===this.slideCount-2&&b===this.DirectionType.Backward?this.SlideTransitionDirectionType.FirstToLast:1===a&&this.currentSlideIndex>=
this.slideCount-2&&b===this.DirectionType.Forward?this.SlideTransitionDirectionType.LastToFirst:this.SlideTransitionDirectionType.Inside};b.Slideshow.prototype.mapUi=function(a){var b={$slideshow:c(".cpSliderJS"+a).closest(".widget.slideShow"),$slider:c(".cpSliderJS"+a),$slides:c(".cpSliderJS"+a).find("li"),$pager:c(".pagerJS"+a),$pages:c(".pagerJS"+a).find("li"),transitionType:c(".cpSliderJS"+a).hasClass("slide")?this.TransitionType.Slide:this.TransitionType.Fade,NotifySlidesAdded:function(){b.$slides=
c(".cpSliderJS"+a).find("li")},values:{}};b.values.transitionTiming=b.$slideshow.children("input.transitionTiming").val();b.values.slideTiming=b.$slideshow.children("input.slideTiming").val();return b};b.Slideshow.prototype.createSlider=function(a){var b={$slider:a.$slider,$slides:a.$slides,$pager:a.$pager,$pages:a.$pages,setSlide:function(b){a.$slider.hasClass("slide")&&a.$slider.css("left","-"+b.toString()+"00%")},getCurrentlyShownSlide:function(){return a.$slider.find(".showing")},createOverlapImagesForFirstAndLastSlides:function(){var c=
a.$slider.find("li");c.first().clone().insertAfter(a.$slider.find("li").last());c.last().clone().insertBefore(a.$slider.find("li").first());a.NotifySlidesAdded();b.$slides=a.$slides}};return b};b.Slideshow.prototype.mapDotClickUi=function(a){return{$dots:a.parents(".pager").children("li"),$selectedDot:a.parent("li"),$selectedImage:c("#"+a.attr("data-targetImageli")),$images:c("#"+a.attr("data-targetImageli")).parent("ol").children("li"),selectedSlideIndex:this.transitionType===this.TransitionType.Slide?
parseInt(a.attr("data-dotNumber")):parseInt(a.attr("data-dotNumber")-1)}};b.Slideshow.prototype.bindUx=function(){var a=this;c(".prevJS"+this.uniqueID).unbind("click").click(function(){a.onPause();a.previous();a.pausedSlideIndex--;c("#ssPlay-btn-"+a.uniqueID).removeClass("isHidden");c("#ssPause-btn-"+a.uniqueID).addClass("isHidden");a.pausedSlideIndex=-1==a.pausedSlideIndex?a.slider.$slides.length-1:a.pausedSlideIndex;c(".liveRegionJS"+a.uniqueID).text("Item "+(a.pausedSlideIndex+1)+" of "+a.slider.$slides.length)});
c(".dotJS"+this.uniqueID).unbind("click").click(function(){a.pause();a.dotClick(c(this))});c(".nextJS"+this.uniqueID).unbind("click").click(function(){a.onPause();a.next();a.pausedSlideIndex++;c("#ssPlay-btn-"+a.uniqueID).removeClass("isHidden");c("#ssPause-btn-"+a.uniqueID).addClass("isHidden");a.pausedSlideIndex=a.pausedSlideIndex==a.slider.$slides.length?0:a.pausedSlideIndex;c(".liveRegionJS"+a.uniqueID).text("Item "+(a.pausedSlideIndex+1)+" of "+a.slider.$slides.length)});c("#ssPause-btn-"+this.uniqueID).unbind("click").click(function(){a.onPause();
c("#ssPlay-btn-"+a.uniqueID).removeClass("isHidden");c("#ssPause-btn-"+a.uniqueID).addClass("isHidden")});c("#ssPlay-btn-"+this.uniqueID).unbind("click").click(function(){a.onResume();c("#ssPause-btn-"+a.uniqueID).removeClass("isHidden");c("#ssPlay-btn-"+a.uniqueID).addClass("isHidden")});a.liveEditEnabled&&(a.slider.$slides.add("p.slideshowOptions.empty.placeholder").unbind("click").click(function(a){a=c(this).closest(".widget.slideShow");var b=ContentCollectionInstance.PageID,d=ContentCollectionInstance.ModuleID,
g=a.data("widgetid"),k=a.find(".hdnSlideshowUniqueID").val();callbackfnSlideshowSave=null;parentID_Slideshow=attrOrProps(a,"id");ContentCollectionInstance.SlideshowWidgetID=g;$popUp_Slideshow=openCpModal({title:"Slideshow",className:"newCP adminWrap cpPopOver admin modalSlideshow",isFrontEnd:!1,useIframe:!1,draggable:!0,url:"/Slideshow/SlideshowConfiguration/"+k+("?pageID\x3d"+b+"\x26moduleID\x3d"+d)})}),c(".widget.slideShow").siblings("a.handle.options").each(function(){var a=c(this);a.data("cpPopover")&&
a.data("cpPopover").destroy();var b=attrOrProps(a.parents('[data-cprole$\x3d"ontentContainer"]'),"id"),d=a.parents(".pageContent").filter(":first").data("containerid"),b="/ContentWidgets/SlideshowOptions?widgetID\x3d"+a.data("widgetid")+"\x26pageID\x3d"+ContentCollectionInstance.PageID+"\x26contentContainerExternalID\x3d"+b+"\x26moduleID\x3d"+ContentCollectionInstance.ModuleID+"\x26contentContainerID\x3d"+d;a.cpPopover({url:b,className:"options adminWrap",onClose:function(a,b){a.preventDefault();
window.CommonPopoverInstance.hide(b);c(document.activeElement).change()}})}))}})(this,"undefined"==typeof $?window.parent.$:$);function SlideshowColorPicker(b,c,g){this.$spectrumInput=$(b);this.$colorInput=$(c);this.defaultColor=g;this.startingColor=this.$colorInput&&this.$colorInput.val()?this.$colorInput.val():this.defaultColor}
SlideshowColorPicker.prototype.init=function(){var b=this;b.$spectrumInput.spectrum("destroy").spectrum({color:b.startingColor,showInput:!0,showPalette:!0,showPaletteOnly:!1,showSelectionPalette:!0,preferredFormat:"hex",change:function(c){c=c.toHexString();b.setValueSpectrum(c)}});b.setValueSpectrum(b.startingColor);b.$spectrumInput.parent().delegate(".clearValue","click",function(c){c&&(c.stopPropagation?c.stopPropagation():c.cancelBubble=!0);b.clearValueSpectrum()})};
SlideshowColorPicker.prototype.setValueSpectrum=function(b){this.$colorInput.val(b);this.$spectrumInput.spectrum("set",b);this.$spectrumInput.siblings("a.clearValue").remove();b&&b!==this.defaultColor&&this.$spectrumInput.next().after('\x3ca class\x3d"clearValue" title\x3d"Clear Color" href\x3d"#" onclick\x3d"return false;" style\x3d""\x3eClear\x3c/a\x3e')};
SlideshowColorPicker.prototype.clearValueSpectrum=function(){this.$spectrumInput.siblings("a.clearValue").fadeOut(300);this.$colorInput.val("");this.setValueSpectrum(this.defaultColor)};